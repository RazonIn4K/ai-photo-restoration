# Gemini Code Llama - Project Analysis

This document provides a comprehensive overview of the "AI Photo Restoration Service" project, generated by Gemini Code Llama. It is intended to be used as a quick-start guide and a reference for developers.

## Project Overview

This is a TypeScript-based Node.js application that provides a semi-automated photo restoration service. It is designed to run on local infrastructure with optional cloud AI services. The system emphasizes human oversight, traceability, and security.

### Key Technologies

- **Backend:** Node.js, Express.js, TypeScript
- **Database:** MongoDB with Client-Side Field Level Encryption (CSFLE)
- **Caching:** Redis
- **Monitoring:** Prometheus and Grafana
- **Testing:** Vitest
- **Linting & Formatting:** ESLint, Prettier
- **Containerization:** Docker

### Architecture

The application is built with a modern, modular architecture.

- `src/index.ts`: The main entry point of the application, responsible for bootstrapping the service, including database connections and model initialization.
- `src/api/app.ts`: Configures the Express application, including middleware for security, rate limiting, request logging, and error handling.
- `src/api/routes`: Defines the API routes. The main routes are for handling photo restoration requests.
- `src/database`: Manages the MongoDB connection, including CSFLE for data encryption.
- `src/services`: Contains the business logic for photo ingestion and storage integration.
- `src/lib`: Includes shared libraries like the logger and validation utilities.
- `docker-compose.yml`: Defines the services required for the application, including MongoDB, Redis, Prometheus, and Grafana.

## Building and Running

### Prerequisites

- Node.js (>=20.0.0)
- Docker

### Setup

1.  **Install dependencies:**

    ```bash
    npm install
    ```

2.  **Configure environment variables:**
    Copy `.env.example` to `.env` and update the values as needed.

    ```bash
    cp .env.example .env
    ```

3.  **Start services:**
    ```bash
    docker compose up -d
    ```

### Development

- **Run in development mode:**

  ```bash
  npm run dev
  ```

  This will start the server with hot-reloading.

- **Run tests:**

  ```bash
  npm test
  ```

- **Lint and format code:**
  ```bash
  npm run lint
  npm run format
  ```

### Production

- **Build for production:**

  ```bash
  npm run build
  ```

- **Start in production mode:**
  ```bash
  npm start
  ```

## Development Conventions

- **Coding Style:** The project uses ESLint and Prettier to enforce a consistent coding style.
- **Testing:** Tests are written with Vitest and are located in the `tests` directory.
- **Commits:** The project uses Husky for pre-commit hooks, which run linting and formatting checks.
- **Branching:** Feature branches should be created from `main`.
- **Pull Requests:** Pull requests should include a detailed description of the changes.
